<!--
  ~ This file is part of Hopsworks
  ~ Copyright (C) 2018, Logical Clocks AB. All rights reserved
  ~
  ~ Hopsworks is free software: you can redistribute it and/or modify it under the terms of
  ~ the GNU Affero General Public License as published by the Free Software Foundation,
  ~ either version 3 of the License, or (at your option) any later version.
  ~
  ~ Hopsworks is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  ~ without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
  ~ PURPOSE.  See the GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License along with this program.
  ~ If not, see <https://www.gnu.org/licenses/>.
  -->

<div ng-controller="MainCtrl as mainCtrl">
    <div ng-include="'nav.html'"></div>
    <div id="wrapper" class="toggled" ng-controller="featurestoreCtrl as featurestoreCtrl">
        <div class="overlay"></div>
        <div ng-include="'navProject.html'"></div>
        <div class="content-wrapper">
            <div ng-if="featurestoreCtrl.loading" class="loadingwrap" style="z-index: 105">
                <div class="loading-content">
                    <div class="loader-in-wrap"></div>
                    {{featurestoreCtrl.loadingText}}
                </div>
            </div>
            <uib-tabset active="0">
                <uib-tab index="0" heading="Feature Groups & Training Datasets"
                         class="fs-tab">

                    <h2 style="margin-bottom: 30px; color:#555">
                        Feature Groups and Training Datasets
                    </h2>

                    <h3 class="text-muted" style="text-align: center;"
                        ng-show="featurestoreCtrl.featurestoreEntitiesDictList.length < 1">
                        No Feature Groups or Training Datasets to show
                    </h3>

                    <div class="row form-inline" ng-show="featurestoreCtrl.featurestoreEntitiesDictList.length > 0">
                        <div class="col-sm-6 col-md-6 col-lg-6 form-group">
                            <label style="margin-left: 20px; color:#555">
                                Search:
                                <input class="form-control"
                                       style="margin-left: 10px;"
                                       ng-model="featurestoreCtrl.fseFilter">
                            </label>
                        </div>
                        <div class="col-sm-6 col-md-6 col-lg-6">
                            <div class="dropdown" style="z-index: 102; position:relative;
                            float:right;margin-right:90px">
                                <button type="button"
                                        class="btn btn-default btn-success control-label"
                                        id="createNewFg"
                                        data-toggle="dropdown"
                                >
                                    Create <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a ng-click="featurestoreCtrl.showCreateFeaturegroupForm()">Feature
                                        Group</a></li>
                                    <li><a ng-click="featurestoreCtrl.showCreateTrainingDatasetForm()">
                                        Training Dataset</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <table class="table table-hover" ng-show="featurestoreCtrl.featurestoreEntitiesDictList.length > 0">
                        <thead class="thead-inverse">
                        <tr>
                            <th style="width: 40%" ng-click="featurestoreCtrl.sort('name')"
                                class="fs-table">
                                Name
                                <span class="glyphicon sort-icon"
                                      ng-show="featurestoreCtrl.featurestoreEntitySortKey == 'name'"
                                      ng-class="{'glyphicon-chevron-up':featurestoreCtrl.reverse,'glyphicon-chevron-down':!featurestoreCtrl.reverse}"></span>
                            </th>
                            <th style="width: 40%" ng-click="featurestoreCtrl.sort('type')"
                                class="fs-table">
                                Type
                                <i class="fa fa-info-circle" tooltip-placement="auto left"
                                   uib-tooltip="The type of the entity.
                                   A Feature Group is a logical grouping of features and a Training Dataset is an immutable snapshot of a set of features for machine learning experiments."
                                   style="margin-left: 10px"></i>
                                <span class="glyphicon sort-icon"
                                      ng-show="featurestoreCtrl.featurestoreEntitySortKey == 'type'"
                                      ng-class="{'glyphicon-chevron-up':featurestoreCtrl.reverse,'glyphicon-chevron-down':!featurestoreCtrl.reverse}"></span>
                            </th>
                            <th style="width: 10%" class="fs-table">
                                Version
                            </th>
                            <th style="width: 10%" id="fgActionCol" class="fs-table">
                                Actions
                            </th>
                        </tr>
                        </thead>
                        <tbody class="table-hover">
                        <tr
                                dir-paginate="entity in featurestoreCtrl.featurestoreEntitiesDictList| orderBy :featurestoreCtrl.featurestoreEntitySortKey:featurestoreCtrl.reverse| filter:featurestoreCtrl.fseFilter:false | itemsPerPage:featurestoreCtrl.pageSize"
                                pagination-id="featurestoreentitiestable"
                                class="fs-table">
                            <td class="fs-table">{{entity.name}}</td>
                            <td class="fs-table">{{entity.type}}</td>
                            <td class="fs-table">
                                <ui-select ng-model="entity.activeVersion"
                                           style="z-index: {{100-$index}}">
                                    <ui-select-match
                                            placeholder="Select a version">
                                        <span>{{$select.selected}}</span>
                                    </ui-select-match>
                                    <ui-select-choices repeat="version in entity.versions">
                                        <span ng-bind="version"></span>
                                    </ui-select-choices>
                                </ui-select>
                            </td>
                            <td class="fs-table">
                                <div class="btn-group fs-btn" role="group"
                                     ng-if="entity.type=='Feature Group'">
                                    <button class="btn btn-success glyphicon glyphicon glyphicon-stats"
                                            uib-tooltip="View statistics"
                                            ng-click="featurestoreCtrl.viewFeaturegroupStatistics(entity.versionToGroups[entity.activeVersion]); $event.stopPropagation();"></button>
                                    <button class="btn btn-danger glyphicon glyphicon-trash"
                                            uib-tooltip="Delete"
                                            ng-click="featurestoreCtrl.deleteFeaturegroup(entity.versionToGroups[entity.activeVersion]); $event.stopPropagation();"></button>
                                    <div uib-dropdown class="btn-group" role="group"
                                         style="z-index: auto;">
                                        <button type="button"
                                                uib-dropdown-toggle
                                                class="btn btn-default glyphicon"
                                                style="font-family: sans-serif;"
                                        >
                                            More
                                            <span class="caret"></span>
                                        </button>
                                        <ul uib-dropdown-menu
                                            class="dropdown-menu dropdown-menu-right"
                                            style="font-family: sans-serif;">
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.newFeaturegroupVersion(entity.versionToGroups, entity.versions); $event.stopPropagation();">
                                                Create new feature group version</a></li>
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.clearFeaturegroupContents(entity.versionToGroups[entity.activeVersion]); $event.stopPropagation();">
                                                Clear feature group contents</a></li>
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.updateFeaturegroup(entity.versionToGroups[entity.activeVersion]); $event.stopPropagatphicion();">
                                                Edit feature group</a></li>
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.previewFeaturegroup(entity.versionToGroups[entity.activeVersion]);">
                                                Preview feature group data</a></li>
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.viewFeaturegroupInfo(entity.versionToGroups[entity.activeVersion]);">
                                                View feature group details</a></li>
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.viewSchemaContent(entity.versionToGroups[entity.activeVersion]);">
                                                View feature group schema</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="btn-group fs-btn" role="group"
                                     ng-if="entity.type=='Training Dataset'">
                                    <button
                                            class="fs-btn btn btn-success glyphicon glyphicon glyphicon-stats"
                                            uib-tooltip="View statistics"
                                            ng-click="featurestoreCtrl.viewTrainingDatasetStatistics(entity.versionToGroups[entity.activeVersion]); $event.stopPropagation();"></button>
                                    <button class="fs-btn btn btn-danger glyphicon glyphicon-trash"
                                            uib-tooltip="Delete"
                                            ng-click="featurestoreCtrl.deleteTrainingDataset(entity.versionToGroups[entity.activeVersion]); $event.stopPropagation();"></button>
                                    <div uib-dropdown class="btn-group" role="group"
                                         style="z-index: auto;">
                                        <button type="button"
                                                uib-dropdown-toggle
                                                class="fs-btn btn btn-default glyphicon"
                                                style="font-family: sans-serif;"
                                        >
                                            More
                                            <span class="caret"></span>
                                        </button>
                                        <ul uib-dropdown-menu
                                            class="dropdown-menu dropdown-menu-right"
                                            style="font-family: sans-serif;">
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.newTrainingDatasetVersion(entity.versionToGroups, entity.versions); $event.stopPropagation();">
                                                Create new training dataset version</a></li>
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.updateTrainingDataset(entity.versionToGroups[entity.activeVersion]); $event.stopPropagatphicion();">
                                                Edit training dataset</a></li>
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.viewTrainingDatasetInfo(entity.versionToGroups[entity.activeVersion]);">
                                                View training dataset details</a></li>
                                            <li><a role="menuitem"
                                                   ng-click="featurestoreCtrl.viewTrainingDatasetSchemaContent(entity.versionToGroups[entity.activeVersion])">
                                                View training dataset schema</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <dir-pagination-controls
                            pagination-id="featurestoreentitiestable"
                            class="pull-right"
                            max-size="5"
                            direction-links="true"
                            boundary-links="true"
                    >
                    </dir-pagination-controls>
                </uib-tab>
                <uib-tab index="1" heading="Feature Search"
                         class="fs-tab">

                    <h2 style="margin-bottom: 30px;color:#555">
                        Feature Search
                    </h2>

                    <div>
                        <div class="fs_card card-deck-wrapper mb-3 feature-search margin-left">
                            <div class="row">
                                <div class="col-sm-3">
                                    <form class="form-inline mr-auto">
                                        <input class="form-control mr-sm-2 f-search-input" type="text"
                                               placeholder="Search"
                                               aria-label="Search"
                                               ng-model="featurestoreCtrl.featureSearchQuery"
                                        >
                                        <button class="btn btn-unique btn-rounded btn-sm my-0"
                                                ng-click="featurestoreCtrl.featureSearch(featurestoreCtrl.featureSearchQuery); $event.stopPropagation();"
                                                style="color:white; background-color: rgba(0, 0, 0, 0.25); font-size:16px; font-family: 'Source Sans Pro',sans-serif; font-weight:bold">
                                            Search
                                        </button>
                                    </form>
                                </div>
                                <div class="col-sm-5">
                                    <div ng-if="!featurestoreCtrl.hasFeatureSearchResult() && featurestoreCtrl.hasSearched">
                                        <h5 class="text-uppercase bold_fs" style="margin-top:100px;
                                        text-align:center; color:#555">
                                            No Search Results
                                        </h5>
                                    </div>
                                    <div ng-if="featurestoreCtrl.hasFeatureSearchResult()">
                                        <div class="row">
                                            <div>
                                                <button class="close"
                                                        ng-click="featurestoreCtrl.resetFeatureSearchResult()"
                                                        type="button">
                                                    <span aria-hidden="true">&times;</span></button>
                                            </div>
                                        </div>
                                        <div class="row" ng-if="featurestoreCtrl.featureSearchResultIsNotFound()">
                                            <h4 style="text-align: center;">
                                                {{featurestoreCtrl.featureSearchResult}}</h4>
                                        </div>
                                        <div ng-if="!featurestoreCtrl.featureSearchResultIsNotFound()" class="row">
                                            <div class="multipleSearchResults row"
                                                 ng-if="featurestoreCtrl.hasMultipleSearchResults()"
                                                 style="margin-top:10px;margin-left:10px;margin-right:5px">
                                                <div class="col-sm-4"> The feature
                                                    `{{featurestoreCtrl.featureSearchResult.name}}` was found in
                                                    multiple feature groups.
                                                </div>
                                                <div class="col-sm-7">
                                                    <ui-select ng-model="featurestoreCtrl.selectedSearchFeaturegroup"
                                                               on-select="featurestoreCtrl.onSelectFeaturegroupSearchResultCallback($item.name)"
                                                               style="z-index: 103"
                                                               id="selectFeatureGroupSearchResult"
                                                    >
                                                        <ui-select-match placeholder="Select a feature group">
                                                            <span>{{$select.selected.longName}}</span>
                                                        </ui-select-match>
                                                        <ui-select-choices
                                                                repeat="item in featurestoreCtrl.featureSearchResultFeaturegroups">
                                                            <span ng-bind="item.longName"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                                <div class="col-sm-1">
                                                </div>
                                            </div>
                                            <div id="accordion" role="tablist" aria-multiselectable="true"
                                                 style="margin-top:20px" class="col-sm-11">
                                                <div class="fs_card card">

                                                    <h5 class="text-uppercase bold_fs" style="margin-top: 20px;
                                                margin-bottom: 20px; margin-left: 15px; color:#555">
                                                        Feature: <span class="text-lowercase">{{featurestoreCtrl.featureSearchResult.name}}</span>
                                                    </h5>

                                                    <div class="fs_card card-header" role="tab" id="infoHeading"
                                                         data-toggle="collapse" data-parent="#accordion" href="#info"
                                                         aria-expanded="false" aria-controls="info">
                                                        <h5 class="text-uppercase bold_fs" style="color:#555">
                                                            Info
                                                        </h5>
                                                    </div>
                                                    <div id="info" class="fs_card card-block collapse" role="tabpanel"
                                                         aria-labelledby="infoHeading">
                                                        <p><span style="font-weight:bold">Feature: </span>
                                                            {{featurestoreCtrl.featureSearchResult.name}}
                                                        </p>
                                                        <p><span style="font-weight:bold">Version: </span>
                                                            {{featurestoreCtrl.featureSearchResult.version}} </p>
                                                        <p><span style="font-weight:bold">Type: </span>
                                                            {{featurestoreCtrl.featureSearchResult.type}} </p>
                                                        <p><span style="font-weight:bold">Description: </span>
                                                            {{featurestoreCtrl.featureSearchResult.description}} </p>
                                                        <p><span style="font-weight:bold">Primary: </span>
                                                            {{featurestoreCtrl.featureSearchResult.primary}} </p>
                                                        <p><span style="font-weight:bold">Feature Group: </span>
                                                            {{featurestoreCtrl.featureSearchResult.featuregroup}} </p>
                                                    </div>
                                                    <div class="fs_card card-header" role="tab" id="apiHeading"
                                                         data-toggle="collapse" data-parent="#accordion" href="#api"
                                                         aria-expanded="false" aria-controls="api">
                                                        <h5 class="text-uppercase bold_fs" style="color:#555">
                                                            API
                                                        </h5>
                                                    </div>
                                                    <div id="api" class="fs_card card-block collapse" role="tabpanel"
                                                         aria-labelledby="apiHeading">
<pre>
<code>
{{featurestoreCtrl.getCode(featurestoreCtrl.featureSearchResult)}}
</code>
</pre>
                                                    </div>
                                                    <div class="fs_card card-header" role="tab" id="featuregroupHeading"
                                                         data-toggle="collapse" data-parent="#accordion"
                                                         href="#featuregroup"
                                                         aria-expanded="false" aria-controls="featuregroup">
                                                        <h5 class="text-uppercase bold_fs" style="color:#555">
                                                            Feature Group
                                                        </h5>
                                                    </div>
                                                    <div id="featuregroup" class="fs_card  card-block collapse"
                                                         role="tabpanel"
                                                         aria-labelledby="featuregroupHeading">
                                                        <ul class="list-unstyled">
                                                            <li>
                                                                <span style="font-weight:700">Id:</span>
                                                                {{featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.id}}
                                                            </li>
                                                            <li>
                                                                <span style="font-weight:700">Name:</span>
                                                                {{featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.name}}
                                                            </li>
                                                            <li>
                                                                <span style="font-weight:700">Version:</span>
                                                                {{featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.version}}
                                                            </li>
                                                            <li>
                                                                <span style="font-weight:700">Description:</span>
                                                                {{featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.description}}
                                                            </li>
                                                            <li>
                                                                <span style="font-weight:700">HDFS Path:</span>
                                                                {{featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.hdfsStorePaths[0]}}
                                                            </li>
                                                            <li>
                                                                <span style="font-weight:700">Creator:</span>
                                                                {{featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.creator}}
                                                            </li>
                                                            <li>
                                                                <span style="font-weight:700">Created:</span>
                                                                {{formatDate(featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.created)}}
                                                            </li>
                                                            <li>
                                                                <span style="font-weight:700">Size:</span>
                                                                <i ng-if="featurestoreCtrl.featuregroupSizeWorking"
                                                                   style="margin-top: 2px"
                                                                   class="fa fa-spinner fa-spin pull-right"></i>
                                                                {{featurestoreCtrl.featuregroupSize}}
                                                            </li>
                                                            <li>
                                                                <span style="font-weight:700">Job:</span>
                                                                <span
                                                                        ng-if="featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.jobName === null">
                                                                No job specified
                                                            </span>
                                                                <div
                                                                        ng-if="featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.jobName !== null"
                                                                        , style="display:inline;">
                                                                <span ng-if="featurestoreCtrl.isJobLocal(featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.jobId)"
                                                                      style="cursor:pointer;color:#555;text-decoration:underline;"
                                                                      ng-click="featurestoreCtrl.launchJob(featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.jobName); $event.stopPropagation();">
                                                                    {{featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.jobName}}
                                                                </span>
                                                                    <span
                                                                            ng-if="!featurestoreCtrl.isJobLocal(featurestoreCtrl.selectedSearchFeaturegroup.featuregroup.jobId)"
                                                                            style="color: #880000 ">
                                                                    (The job is owned by another project)
                                                                </span>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-1">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <h3 class="text-muted" style="text-align: center; color:#555"
                                        ng-show="featurestoreCtrl.features.length < 1">
                                        No Features to show
                                    </h3>
                                    <table class="table table-hover"
                                           ng-if="featurestoreCtrl.features.length > 0">
                                        <thead class="thead-inverse">
                                        <tr class="fs-table">
                                            <th style="width: 80%" ng-click="featurestoreCtrl.sortFeature('name')"
                                                class="fs-table">
                                                Feature
                                                <span class="glyphicon sort-icon"
                                                      ng-show="featurestoreCtrl.featuresSortKey == 'name'"
                                                      ng-class="{'glyphicon-chevron-up':featurestoreCtrl.featuresReverse,'glyphicon-chevron-down':!featurestoreCtrl.featuresReverse}"></span>
                                            </th>
                                            <th style="width: 20%" class="fs-table">
                                                Version
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody class="table-hover">
                                        <tr
                                                dir-paginate="feature in featurestoreCtrl.features| orderBy :featurestoreCtrl.featuresSortKey:featurestoreCtrl.featuresReverse | itemsPerPage:featurestoreCtrl.featuresPageSize"
                                                pagination-id="featurestable"
                                                current-page="featurestoreCtrl.currentPage"
                                                class="fs-table"
                                                ng-click="featurestoreCtrl.featureSearch(feature.name)"
                                        >
                                                <td class="fs-table">
                                            <span style="cursor:pointer;color:#555;">
                                                {{feature.name}}
                                            </span>
                                                </td>
                                                <td class="fs-table">
                                                    {{feature.version}}
                                                </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <dir-pagination-controls
                                            pagination-id="featurestable"
                                            class="pull-right"
                                            max-size="5"
                                            direction-links="true"
                                            boundary-links="true"
                                    >
                                    </dir-pagination-controls>
                                </div>
                            </div>
                        </div>
                    </div>
                </uib-tab>
                <uib-tab index="2" heading="Overview" class="fs-tab" select="featurestoreCtrl.overviewTab()">
                    <div>
                        <h2 style="margin-bottom: 30px; color:#555">
                            Feature Store Overview
                        </h2>
                        <div class="row" id="headRow2">
                            <small class="text-muted" style="margin-left:20px;">
                                Last updated
                                <time am-time-ago="featurestoreCtrl.date"></time>
                            </small>
                        </div>
                        <div class="row" id="headRow">
                            <div class="col-sm-4">
                                <div class="fs_card card card-inverse card-success">
                                    <div class="fs_card card-block bg-success">
                                        <h5 class="fs_card text-uppercase bold_fs fs_top_card fs_top_heading"
                                            style="color:#555">
                                            Features</h5>
                                        <h1 class="fs_card display-1 fs_top_card fs_top_num" style="color:#555">
                                            {{featurestoreCtrl.features.length}}</h1>
                                    </div>
                                </div>
                                <div id="featureProgressChart">
                                </div>
                                <div>
                                    <small class="text-muted" style="margin-left:20px;">
                                        Number of features over time.
                                    </small>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="fs_card card card-inverse card-info">
                                    <div class="fs_card card-block bg-info">
                                        <h5 class="fs_card text-uppercase bold_fs fs_top_card fs_top_heading"
                                            style="color:#555">
                                            Feature Groups</h5>
                                        <h1 class="fs_card display-1 fs_top_card fs_top_num" style="color:#555">
                                            {{featurestoreCtrl.featuregroups.length}}</h1>
                                    </div>
                                </div>
                                <div id="quotaChart"
                                     ng-if="featurestoreCtrl.featurestoreHdfsQuota() != null"
                                     style="margin-left:150px">
                                </div>
                                <div style="margin-top:40px">
                                    <small class="text-muted" ng-if="featurestoreCtrl.featurestoreHdfsQuota() != null"
                                           style="margin-left:200px;">
                                        {{featurestoreCtrl.featurestoreHdfsUsage()}} of
                                        {{featurestoreCtrl.featurestoreHdfsQuota()}} used.
                                    </small>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="fs_card card card-inverse card-warning">
                                    <div class="fs_card card-block bg-warning">
                                        <h5 class="fs_card text-uppercase bold_fs fs_top_card fs_top_heading"
                                            style="color:#555"
                                        >Training
                                            Datasets</h5>
                                        <h1 class="fs_card display-1 fs_top_card fs_top_num" style="color:#555">
                                            {{featurestoreCtrl.trainingDatasets.length}}</h1>
                                    </div>
                                </div>
                                <div id="featureStoragePie">
                                </div>
                                <div style="margin-left:80px; margin-top:15px;">
                                    <small class="text-muted">
                                        Storage formats.
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </uib-tab>
                <uib-tab index="3" heading="Info" class="fs-tab">

                    <h2 style="margin-bottom: 30px; color:#555">
                        Feature Store Info
                    </h2>

                    <div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="fs_card card">
                                    <div class="fs_card card-block">
                                        <h4 class="fs_card card-title fs_card_title" style="color:#555">Cross-Project
                                            Features</h4>
                                        <div class="row">
                                            <p class="fs_card card-text" style="margin-left:15px; margin-right:15px">
                                                Feature Stores can be shared across projects.
                                                Select a feature store below.
                                            </p>
                                            <p class="fs_card card-text" style="margin-left:15px; margin-right:15px">
                                                <small class="text-muted">Number of available feature stores:
                                                    {{featurestoreCtrl.featurestores.length}}
                                                </small>
                                            </p>
                                        </div>
                                        <div class="row" style="margin-top: 20px; margin-bottom:50px; margin-right:15px;
                                    margin-left:5px;">
                                            <ui-select ng-model="featurestoreCtrl.featurestore"
                                                       on-select="featurestoreCtrl.onSelectFeaturestoreCallback($item)"
                                                       style="z-index: 1"
                                                       id="selectFeaturestore"
                                            >
                                                <ui-select-match placeholder="Select a feature store">
                                                    <span>{{$select.selected.featurestoreName}}</span>
                                                </ui-select-match>
                                                <ui-select-choices
                                                        repeat="item in featurestoreCtrl.featurestores">
                                                    <span ng-bind="item.featurestoreName"></span>
                                                </ui-select-choices>
                                            </ui-select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="fs_card card card-block">
                                    <h4 class="fs_card card-title fs_card_title" style="color:#555">
                                        Recent Feature Engineering Jobs</h4>
                                    <p class="fs_card card-text" ng-if="featurestoreCtrl.fe_jobs.length == 0">
                                        No job to show.
                                    </p>
                                    <div class="table-responsive" ng-if="featurestoreCtrl.fe_jobs.length > 0">
                                        <table class="table table-hover" id="fejobsTable">
                                            <thead class="fs-table">
                                            <th style="width: 50%" class="fs-table">
                                                Job
                                            </th>
                                            <th style="width: 50%" class="fs-table">
                                                Progress
                                            </th>
                                            </thead>
                                            <tbody class="table-hover">
                                            <tr data-ng-repeat="job in featurestoreCtrl.fe_jobs track by $index"
                                                class="fs-table">
                                                <td class="fs-table">
                                            <span ng-if="featurestoreCtrl.isJobLocal(job.id)"
                                                  style="cursor:pointer;color:#555;"
                                                  ng-click="featurestoreCtrl.launchJob(job.name); $event.stopPropagation();">
                                                                    {{job.name}}
                                            </span>
                                                    <span ng-if="!featurestoreCtrl.isJobLocal(job.id)"
                                                          style="color: #880000 ">
                                                (The job is owned by another project)
                                            </span>
                                                </td>
                                                <td class="fs-table">
                                                    <div class="progress-bar progress-bar-success progress-bar-striped"
                                                         role="progressbar" aria-valuenow="{{job.progress * 100}}"
                                                         aria-valuemin="0" aria-valuemax="100"
                                                         style="width:{{job.progress * 90}}%"
                                                         ng-if="job.progress !== undefined && job.progress !== null">
                                                        {{job.progress * 100}}%
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <p class="fs_card card-text">
                                        <small class="text-muted">
                                            Last updated
                                            <time am-time-ago="featurestoreCtrl.date"></time>
                                        </small>
                                    </p>
                                </div>
                            </div>

                            <div class="col-sm-4">

                                <div class="fs_card card card-block text-center docs_link">
                                    <h4 class="fs_card card-title fs_card_title" style="color:#555">Documentation</h4>
                                    <p>
                                        <a class="third after fs-doc-link"
                                           href="https://hopsworks.readthedocs.io/en/0.9/user_guide/hopsworks/featurestore.html">
                                            General Documentation
                                        </a>
                                    </p>
                                    <p>
                                        <a class="third after fs-doc-link" href="http://hops-py.logicalclocks.com/">
                                            Python API
                                        </a>
                                    </p>
                                    <p>
                                        <a class="third after fs-doc-link"
                                           href="http://snurran.sics.se/hops/hops-util-javadoc/0.10.0/">
                                            Java/Scala API
                                        </a>
                                    </p>
                                    <p>
                                        <a class="third after fs-doc-link"
                                           href="https://github.com/logicalclocks/hops-examples">
                                            Examples
                                        </a>
                                    </p>
                                </div>
                                <div class="fs_card card">
                                    <div class="fs_card card-block">
                                        <h4 class="fs_card card-title fs_card_title" style="color:#555">Details</h4>
                                        <ul class="list-unstyled">
                                            <li>
                                                <span style="font-weight:700">Id:</span>
                                                {{featurestoreCtrl.featurestore.featurestoreId}}
                                            </li>
                                            <li>
                                                <span style="font-weight:700">Name:</span>
                                                {{featurestoreCtrl.featurestore.featurestoreName}}
                                            </li>
                                            <li>
                                                <span style="font-weight:700">HDFS Path:</span>
                                                {{featurestoreCtrl.featurestore.hdfsStorePath}}
                                            </li>
                                            <li>
                                                <span style="font-weight:700">Size:</span>
                                                <i ng-if="featurestoreCtrl.featurestoreSizeWorking"
                                                   style="margin-top: 2px"
                                                   class="fa fa-spinner fa-spin pull-right"></i>
                                                {{featurestoreCtrl.featurestoreSize}}
                                            </li>
                                            <li>
                                                <span style="font-weight:700">Created:</span>
                                                {{formatDate(featurestoreCtrl.featurestore.created)}}
                                            </li>
                                            <li>
                                                <span style="font-weight:700">Description:</span>
                                                {{featurestoreCtrl.featurestore.featurestoreDescription}}
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </uib-tab>
            </uib-tabset>
        </div>
    </div>
</div>